(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{hhAX:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,'body {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\nlabel {\n  margin-bottom: 0;\n}\n\n',""])},oC12:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}}).call(this,n("8oxB"))},p2bk:function(e,t,n){var a=n("hhAX");"string"==typeof a&&(a=[[e.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,o);a.locals&&(e.exports=a.locals)},tjUo:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),o=n.n(a),l=n("i8i4"),i=n.n(l),s=(n("p2bk"),n("IN8/")),r=n("2INN"),c=n("3mVh"),h=n.n(c),m=n("1oaW");var p=class extends a.Component{constructor(e){super(e),this.state={searchText:""},this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e,t){this.setState({searchText:e})}handleSubmit(){let e="/search-result/"+(""!==this.state.searchText?this.state.searchText:"any");this.props.onSubmit(e)}render(){return o.a.createElement(m.SearchBar,{onChange:this.handleChange.bind(this),onSubmit:this.handleSubmit,defaultValue:this.state.searchText,placeholder:"粘贴宝贝标题 或 关键字",lang:{cancel:"取消"}})}},d=n("2iEm");var g=e=>{const t=Object.entries(e.categories);console.log(t);const n=[t.slice(0,5),t.slice(5,10)].map((e,t)=>{const n=e.map((e,t)=>o.a.createElement(m.FlexItem,{key:t},o.a.createElement(d.a,{to:`/category/${e[0]}`,style:{textDecoration:"none",outline:"none",color:"#0a0a0b"}},o.a.createElement("div",{align:"center"},o.a.createElement("img",{src:e[1],width:"60px",height:"60px"}),o.a.createElement("p",{align:"center",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"small"}},e[0])))));return o.a.createElement(m.Flex,{key:t},n)});return o.a.createElement("div",{style:{paddingTop:"10px"}},n)},u=n("9pDC"),f=n("YG7K");var y=e=>{console.log("enter GoodList render()");const t=e.coupons;console.log("new coupons:"+t);const n=t.map((e,t)=>o.a.createElement(d.a,{to:`/detail/${e.numIid}`,style:{textDecoration:"none",outline:"none",color:"#0a0a0b"}},o.a.createElement("div",{style:{width:"50%",float:"left",position:"relative"}},o.a.createElement(u.a,{key:t,style:{padding:"8px"}},o.a.createElement(u.a.Img,{variant:"top",src:e.pictUrl}),o.a.createElement(u.a.Body,{style:{padding:"1px"}},o.a.createElement(u.a.Text,null,o.a.createElement(m.Cell,{style:{padding:"1px"}},o.a.createElement(m.CellHeader,null,o.a.createElement("img",{src:1===e.userType?"../images/tmtitleicon.png":"../images/tbtitleicon.png",alt:"",style:{display:"block",width:"18px"}})),o.a.createElement(m.CellBody,{style:{fontSize:"small",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e.title)),o.a.createElement(f.a,{responsive:"sm",style:{marginTop:"2px",marginBottom:"0"}},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{style:{padding:"0.8px",color:"#f62e2e",fontSize:"small"}},"券后:",o.a.createElement("span",{style:{fontSize:"0.88rem",marginLeft:".05rem"}}," ¥",o.a.createElement("span",{style:{fontSize:"1.2rem",marginLeft:".10rem"}},e.priceAfterCoupon))),o.a.createElement("td",{style:{padding:"0.8px",color:"#f62e2e",fontSize:"small"}},"优惠券:",o.a.createElement("span",{style:{fontSize:"0.88rem",marginLeft:".05rem"}}," ¥",o.a.createElement("span",{style:{fontSize:"1.2rem",marginLeft:".10rem"}},e.couponValue))))))))),o.a.createElement("div",{style:{width:"3.48rem",height:"3.68rem",background:"url(../images/fanxian.png) no-repeat",backgroundSize:"cover",textAlign:"center",color:"white",fontSize:"small",position:"absolute",right:"4px",top:"0px",zIndex:"999"}},o.a.createElement("p",{style:{marginTop:"1.2rem",color:"#fff",fontSize:".88rem",textAlign:"center"}},"¥",o.a.createElement("span",{style:{fontSize:"1.2rem",marginLeft:".05rem"}},e.rebate))))));return o.a.createElement("div",null,n)};const E="http://localhost:8080";var x=class extends a.Component{constructor(e){super(e),this.state={categories:null,coupons:null,pageNo:2},this.handleSubmit=this.handleSubmit.bind(this),this.loadMore=this.loadMore.bind(this)}handleSubmit(e){this.props.history.push(e)}componentDidMount(){console.log("did mount"),fetch(E+"/api/").then(e=>e.json()).then(e=>{let t=e.category,n=e.coupons;console.log(t),console.log(n),this.setState({categories:t,coupons:n})}).then(e=>{console.log("fetch data error",e)})}loadMore(e,t){let n=E+"/api/more/"+this.state.pageNo;fetch(n).then(e=>e.json()).then(n=>{console.log("enter fetch");let a=this.state.coupons.concat(n),o=this.state.pageNo+1;this.setState({coupons:a,pageNo:o}),setTimeout(()=>{e(),o>4999&&(console.log("stop fetching new data"),t())},5e3)}).then(e=>{console.log("error"+e)})}render(){let e=this.state.coupons,t=this.state.categories;return console.log("pageNo:"+this.state.pageNo),console.log("new state of coupons:"+e),null!==e&&null!==t?o.a.createElement(m.Page,{transition:!0,infiniteLoader:!0,ptr:!1,onLoadMore:this.loadMore},o.a.createElement(p,{onSubmit:this.handleSubmit}),o.a.createElement(g,{categories:t}),o.a.createElement(y,{coupons:e})):o.a.createElement("div",null,"Loadding...")}},b=n("P5Jw"),S=n("jny3");var v=class extends a.Component{constructor(e){super(e),console.log(e),this.handleFetch=this.handleFetch.bind(this),this.back=this.back.bind(this),this.state={coupon:null}}componentDidMount(){console.log("DidMount"),this.handleFetch()}componentWillUnmount(){console.log("will unmount")}back(){}handleFetch(){let e=E+"/api/detail/"+this.props.match.params.id;fetch(e).then(e=>e.json()).then(e=>{this.setState({coupon:e}),console.log("fetched data:"+this.state.coupon)}).then(e=>console.log("fetch data error",e))}render(){const e={priceDesc:{width:"58%",backgroundColor:"#FF9600",color:"#ffffff",textAlign:"center",float:"left"},buyBtn:{width:"42%",backgroundColor:"#E3393C",color:"#ffffff",textAlign:"center",float:"left"},nowPrice:{width:"70%",lineHeight:"50px",fontSize:"28px",color:"#ffffff",textAlign:"center"},oldPrice:{width:"30%",fontSize:"13px",color:"#ffffff"},hr:{width:"100%",height:"10px",backgroundColor:"#f2f2f2"}};let t=this.state.coupon;if(null!==t){let n={};return null!==t.smallImages&&(n=t.smallImages.map((e,t)=>o.a.createElement("img",{key:t,src:e,alt:"",style:{width:"100%"}}))),o.a.createElement("div",{style:{marginBottom:"52px"}},o.a.createElement(S.a,{src:t.pictUrl,style:{width:"100%"}}),o.a.createElement("div",{style:{backgroundColor:"#ED4D57",height:"50px",display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:e.nowPrice},o.a.createElement("span",{style:{fontSize:"1.2rem",marginRight:"0.1rem"}},"¥"),t.priceAfterCoupon),o.a.createElement("div",{style:e.oldPrice},o.a.createElement("div",{style:{fontSize:"15px",textDecoration:"line-through"}},o.a.createElement("span",{style:{fontSize:"0.68rem",marginRight:"0.2rem"}},"¥"),t.zkFinalPrice),o.a.createElement("div",{style:{border:"1px solid #ffffff",width:"96%",textAlign:"center"}},"优惠券：",o.a.createElement("span",{style:{fontSize:"0.5rem",marginRight:"0.1rem"}},"¥"),t.couponValue))),o.a.createElement("div",{style:{fontSize:"small",padding:"8px"}},o.a.createElement("span",null,o.a.createElement("img",{src:"../images/tmtitleicon.png",alt:"",style:{display:"inline",width:"18px"}})),t.title),o.a.createElement("div",{style:e.hr}),o.a.createElement("div",{style:{height:"50px",display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:{width:"50%",float:"left",lineHeight:"50px",verticalAlign:"middle",paddingLeft:"5px"}},o.a.createElement("span",null,o.a.createElement("img",{src:"../images/fanli.png",alt:"",style:{display:"inline",width:"30px"}})),o.a.createElement("span",{style:{fontSize:"small"}},"返现: "),o.a.createElement("span",{style:{color:"orange"}},t.rebate)," 元"),o.a.createElement("div",{style:{width:"50%",float:"left",lineHeight:"50px",verticalAlign:"middle",borderLeft:"1px solid black",paddingLeft:"4px"}},o.a.createElement("span",null,o.a.createElement("img",{src:"../images/weixin0.png",alt:"",style:{display:"inline",width:"30px"}})),o.a.createElement("span",{style:{fontSize:"small"}},"微信: ")," 348928762")),o.a.createElement("div",{style:e.hr}),o.a.createElement("div",{style:{height:"90px",lineHeight:"90px",verticalAlign:"middle",display:"flex",flexDirection:"row"}},o.a.createElement("span",null,o.a.createElement("img",{src:t.shopLogo,alt:"",style:{width:"70px",display:"inline"}})),o.a.createElement("span",{style:{marginLeft:"5px",marginRight:"5px"}},t.shopTitle),o.a.createElement("span",null,o.a.createElement("img",{src:t.userType?"../images/tmtitleicon.png":"../images/tbtitleicon.png",alt:"",style:{width:"18px",display:"inline"}}))),o.a.createElement("div",{style:e.hr}),o.a.createElement("div",null,n),o.a.createElement("div",{style:{width:"100%",height:"50px",lineHeight:"50px",position:"fixed",bottom:"0px",textAlign:"center",verticalAlign:"middle",zIndex:"1000"}},o.a.createElement("div",{style:e.priceDesc},"¥ ",t.priceAfterCoupon," / 返现 ",t.rebate),o.a.createElement("div",{style:e.buyBtn},o.a.createElement(b.CopyToClipboard,{text:t.taokouling,onCopy:()=>alert("淘口令复制成功，打开手机淘宝即可领券")},o.a.createElement("span",null,"立即领券")))))}return o.a.createElement("div",null,o.a.createElement(m.LoadMore,{loading:!0},"Loading"))}};var w=class extends a.Component{constructor(e){super(e),this.state={coupons:null,category:this.props.match.params.id,pageNo:2},this.fetchData=this.fetchData.bind(this),this.loadMore=this.loadMore.bind(this)}componentDidMount(){this.fetchData(),console.log("did mount")}fetchData(){let e=this.state.category;fetch(E+"/api/category/"+e).then(e=>e.json()).then(e=>{console.log("category data"+e),this.setState({coupons:e})}).then(e=>{console.log("some error:"+e)})}loadMore(e,t){let n=this.state.category,a=E+"/api/category/"+n+"/"+this.state.pageNo;fetch(a).then(e=>e.json()).then(t=>{let n=this.state.coupons.concat(t),a=this.state.pageNo+1;this.setState({coupons:n,pageNo:a}),setTimeout(()=>{e(),a>4999&&console.log("stop fetching new data")},5e3)}).then(e=>{console.log("fetch data error"+e)})}render(){let e=this.state.coupons;return null!==e?o.a.createElement(m.Page,{transition:!0,infiniteLoader:!0,ptr:!1,onLoadMore:this.loadMore},o.a.createElement(y,{coupons:e})):o.a.createElement("div",null,o.a.createElement(m.LoadMore,{loading:!0},"Loading"))}};const C=(e,t)=>fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});var T=class extends a.Component{constructor(e){super(e),this.state={searchText:this.props.match.params.q,coupons:null,pageNo:2},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.loadMore=this.loadMore.bind(this)}componentDidMount(){console.log(this.state.searchText);let e=E+"/api/search",t=this.state.searchText?this.state.searchText:"any";C(e,{q:t}).then(e=>e.json()).then(e=>{this.setState({coupons:e})}).then(e=>{console.log("error"+e)})}handleChange(e,t){this.setState({searchText:e})}handleSubmit(){console.log("enter handleSubmit()");let e=E+"/api/search",t=""!==this.state.searchText?this.state.searchText:"any";C(e,{q:t}).then(e=>e.json()).then(e=>{console.log("searchData:"+e),this.setState({coupons:e,searchText:t,pageNo:2})}).then(e=>{console.log("error"+e)})}loadMore(e,t){let n=E+"/api/search/more/"+this.state.pageNo,a=""!==this.state.searchText?this.state.searchText:"any";C(n,{q:a}).then(e=>e.json()).then(t=>{console.log("enter fetch");let n=this.state.coupons.concat(t),a=this.state.pageNo+1;this.setState({coupons:n,pageNo:a}),setTimeout(()=>{e(),a>4&&console.log("stop fetching new data")},5e3)}).then(e=>{console.log("error"+e)})}render(){let e=this.state.coupons;return null!==e?o.a.createElement(m.Page,{transition:!0,infiniteLoader:!0,ptr:!1,onLoadMore:this.loadMore},o.a.createElement(m.SearchBar,{onChange:this.handleChange.bind(this),onSubmit:this.handleSubmit,defaultValue:this.state.searchText,placeholder:"粘贴宝贝标题 或 关键字",lang:{cancel:"取消"}}),o.a.createElement(y,{coupons:e})):o.a.createElement("div",null,"Loading...")}};n("BUDJ"),n("eDds");var k=class extends a.Component{componentDidMount(){console.log("APP did mount")}render(){return o.a.createElement(s.a,null,o.a.createElement(c.CacheSwitch,null,o.a.createElement(h.a,{path:"/",exact:!0,component:x}),o.a.createElement(r.a,{path:"/detail/:id",exact:!0,component:v}),o.a.createElement(h.a,{path:"/category/:id",exact:!0,component:w}),o.a.createElement(h.a,{path:"/search-result/:q",exact:!0,component:T})))}},z=n("oC12");i.a.render(o.a.createElement(k,null),document.getElementById("root")),z.a()}},[["tjUo",1,2]]]);
//# sourceMappingURL=main.js.map